<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:ui="http://java.sun.com/jsf/facelets"  
    xmlns:p="http://primefaces.org/ui">  
         
	<h:head>  
		<link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/common.css"/>
		
		<f:metadata>
 			<f:event listener="#{login.verifyUseLogin}" type="preRenderView"></f:event>
		</f:metadata>
	</h:head>

	<h:body>  
	
 		<div id="container" class="center">
	  		<div id="header" >
	  			<ui:include src="header.xhtml" />
	  		</div>
  		
	  		<div id="navigation">
                <ui:include src="global.xhtml" />          
            </div>
            
            <div id="menu" style="background-color:#FFFFFF;">
	            <ui:include src="menu.xhtml" />  
		    </div>
		    
            <p:spacer width="20" height="20" />
            
            <div id="main">
            	
	           <p:panel header="Generiranje kontingenta" id="panel">   
	          	 <h:form> 
	          	 	
	          	 	<p:growl id="messages" />  
	          	 	
                	<table>
						<tr>				  
					    	<td class="left"><h:outputLabel for="vrsta" value="Vrsta barkoda:" /></td>
					    	<td class="left">
					    		<h:selectOneRadio id="vrsta" value="#{contingent.tip}" label="Vrsta barkoda" disabled="true">  
						            <f:selectItem itemLabel="Naljepnice" itemValue="1" />  
						            <f:selectItem itemLabel="Epruvete" itemValue="2" />   
						        </h:selectOneRadio>  
						    </td>
					  	</tr>
					  	<tr>				  
					    	<td class="left"><h:outputLabel for="broj" value="Broj barkodova:" /></td>
					    	<td class="left">
					    		<p:inputText id="broj" value="#{contingent.kolicina}" label="Broj barkodova" required="true" requiredMessage="Niste unijeli broj barkodova..."/>
					    	</td>
					  	</tr>
				  	</table>
				  	<h:panelGroup id="command" layout="block" style="text-align:left !important">
					  	<p:commandButton value="Spremi" actionListener="#{contingent.save}" update=":panel, :display" onclick="statusDialog.show()" onstart="" oncomplete="statusDialog.hide()"/>
						<p:commandButton value="ObriÅ¡i" icon="ui-icon-refresh" actionListener="#{contingent.clear}" update=":panel"/>
					</h:panelGroup>
					</h:form>
				</p:panel> 
				
				<p:spacer width="20" height="20" />
				
				<p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false" closable="false" resizable="false">  
			    	<p:graphicImage value="/img/loading.gif"/>  
				</p:dialog> 
				
				<p:panel header="Popis kontingenta" id="display">
				    <h:form prependId="false">  
					    <p:dataTable id="basic" var="o" value="#{contingent.lazyModel}"
					    	paginator="true" rows="50"  
            				paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"  
            				paginatorPosition="bottom"
            				emptyMessage="Nema podataka">  
            				
            				<p:column>  
					            <f:facet name="header">Br.</f:facet>  
					            <h:commandLink id="detail" action="#{contingent.getDetail}">  
					            	<f:setPropertyActionListener target="#{contingent.selected}" value="#{o.idContingent}" />
        							<h:outputText value="#{o.rownum}" style="float:left !important"/>   
    							</h:commandLink>
					        </p:column> 
            				
					        <p:column>  
					            <f:facet name="header">ID</f:facet>  
					           	<h:outputText value="#{o.idContingent}" style="float:left !important"/>  
					        </p:column>  
					  
					        <p:column>  
					            <f:facet name="header">Vrsta barkoda</f:facet>  
					            <h:outputText value="#{o.barcodeType}" style="float:left !important"/>  
					        </p:column>  
					        
					        <p:column>  
					            <f:facet name="header">Datum</f:facet>  
					            <h:outputText value="#{o.createDate}" style="float:left !important">
					            	<f:convertDateTime pattern="dd.MM.yyyy" />
					            </h:outputText>  
					        </p:column>  
					        
					        <p:column>  
					            <f:facet name="header">Broj barkodova</f:facet>  
					            <h:outputText value="#{o.amount}" style="float:left !important"/>  
					        </p:column> 
					        
					        <p:column>  
					            <f:facet name="header">Od</f:facet>  
					            <h:outputText value="#{o.barcodeFrom}" style="float:left !important"/>  
					        </p:column>
					        
					        <p:column>  
					            <f:facet name="header">Do</f:facet>  
					            <h:outputText value="#{o.barcodeTo}" style="float:left !important"/>  
					        </p:column>    
					        
					        <p:column>  
					            <f:facet name="header">Broj slobodnih</f:facet>  
					            <h:outputText value="#{o.available}" style="float:left !important"/>  
					        </p:column> 
					  
					    </p:dataTable>  
					</h:form>    
				</p:panel>
            </div>
    	
           <div id="footer">
               <ui:include src="footer.xhtml" /> 
           </div>
            
        </div>    
 	</h:body>
</html>
